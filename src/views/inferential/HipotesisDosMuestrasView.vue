<template>
  <div class="hipotesis-dos-muestras-view">
    <div class="container">
      <div class="hero">
        <h1>Pruebas de Hip√≥tesis de Dos Muestras</h1>
        <p>
          Aprende a comparar dos poblaciones o tratamientos mediante pruebas de hip√≥tesis. Incluye
          ejemplos pr√°cticos y una calculadora interactiva.
        </p>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button
          v-for="tab in tabs"
          :key="tab.id"
          @click="activeTab = tab.id"
          :class="['tab-button', { active: activeTab === tab.id }]"
        >
          {{ tab.label }}
        </button>
      </div>

      <!-- INTRODUCCI√ìN -->
      <div v-if="activeTab === 'introduccion'" class="content-section">
        <h2>Introducci√≥n a las Pruebas de Dos Muestras</h2>

        <div class="intro-content">
          <p>
            En situaciones del mundo real, frecuentemente necesitamos comparar dos grupos o
            poblaciones para determinar si difieren significativamente. Por ejemplo:
          </p>

          <ul>
            <li>¬øHay diferencia entre los salarios medios de plomeros y electricistas?</li>
            <li>¬øEs m√°s efectivo un insecticida que otro?</li>
            <li>
              ¬øDifiere la proporci√≥n de estudiantes que aprueban un examen entre dos universidades?
            </li>
          </ul>

          <div class="definition-box">
            <h3>üéØ Concepto Clave</h3>
            <p>
              A diferencia de las pruebas de una muestra donde comparamos un valor muestral con un
              par√°metro poblacional conocido, en las
              <strong>pruebas de dos muestras</strong> seleccionamos muestras aleatorias de
              <strong>dos poblaciones distintas</strong> para determinar si son iguales las medias o
              las proporciones.
            </p>
          </div>

          <h3>Tipos de Comparaciones</h3>
          <div class="comparison-grid">
            <div class="comparison-item">
              <h4>üìä Comparaci√≥n de Medias</h4>
              <p>Determinar si dos grupos tienen medias poblacionales diferentes</p>
              <ul>
                <li>Muestras independientes (œÉ conocidas)</li>
                <li>Muestras independientes (œÉ desconocidas e iguales)</li>
                <li>Muestras independientes (œÉ desconocidas y desiguales)</li>
                <li>Muestras dependientes (pareadas)</li>
              </ul>
            </div>

            <div class="comparison-item">
              <h4>üìà Comparaci√≥n de Proporciones</h4>
              <p>Determinar si dos grupos tienen proporciones poblacionales diferentes</p>
              <ul>
                <li>Variables cualitativas dicot√≥micas</li>
                <li>Muestras grandes (nœÄ ‚â• 5 y n(1-œÄ) ‚â• 5)</li>
                <li>Uso de proporci√≥n conjunta</li>
                <li>Distribuci√≥n normal (z)</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- TIPOS DE MUESTRAS -->
      <div v-if="activeTab === 'tipos-muestras'" class="content-section">
        <h2>Tipos de Muestras: Independientes vs. Dependientes</h2>

        <div class="intro-content">
          <p>
            Antes de realizar cualquier prueba de dos muestras, es crucial identificar correctamente
            el tipo de muestras que tenemos, ya que esto determina qu√© procedimiento estad√≠stico
            usar.
          </p>
        </div>

        <div class="test-types-container">
          <div class="test-type-card">
            <h3>üîÄ Muestras Independientes</h3>
            <p>
              Las muestras son <strong>independientes</strong> cuando las observaciones de una
              muestra no est√°n relacionadas de ninguna manera con las observaciones de la otra
              muestra.
            </p>

            <div class="definition-box">
              <h4>Caracter√≠sticas</h4>
              <ul>
                <li>Dos grupos completamente separados</li>
                <li>Sin conexi√≥n entre observaciones</li>
                <li>Diferentes sujetos en cada grupo</li>
                <li>Tama√±os de muestra pueden ser diferentes</li>
              </ul>
            </div>

            <div class="examples-section">
              <h4>Ejemplos de Muestras Independientes:</h4>
              <div class="example">
                <strong>Ejemplo 1:</strong> Comparar los salarios de plomeros con los de
                electricistas (dos grupos diferentes de personas).
              </div>
              <div class="example">
                <strong>Ejemplo 2:</strong> Comparar el n√∫mero de defectos en el turno matutino
                versus el turno vespertino.
              </div>
              <div class="example">
                <strong>Ejemplo 3:</strong> Comparar la efectividad de dos insecticidas aplicados a
                diferentes grupos de plantas.
              </div>
            </div>
          </div>

          <div class="test-type-card">
            <h3>üîó Muestras Dependientes (Apareadas)</h3>
            <p>
              Las muestras son <strong>dependientes o apareadas</strong> cuando existe una relaci√≥n
              o conexi√≥n entre las observaciones de ambas muestras.
            </p>

            <div class="definition-box">
              <h4>Dos Tipos de Muestras Dependientes:</h4>

              <div class="subtype">
                <h5>1. Estudios "Antes y Despu√©s"</h5>
                <p>Se mide a los mismos sujetos antes de una intervenci√≥n y despu√©s.</p>
                <div class="example">
                  <strong>Ejemplo:</strong> Medir el peso de pacientes antes y despu√©s de un
                  programa de ejercicio.
                </div>
              </div>

              <div class="subtype">
                <h5>2. Observaciones Apareadas</h5>
                <p>Las mediciones est√°n relacionadas por un elemento com√∫n.</p>
                <div class="example">
                  <strong>Ejemplo:</strong> Dos empresas de aval√∫o que val√∫an las mismas
                  propiedades.
                </div>
              </div>
            </div>

            <div class="important-note">
              <h4>üí° Ventaja de las Muestras Apareadas</h4>
              <p>
                Al aparear observaciones, se <strong>reduce la variaci√≥n</strong> en la distribuci√≥n
                del muestreo, eliminando la variabilidad entre sujetos y enfoc√°ndose solo en la
                diferencia entre tratamientos o condiciones.
              </p>
            </div>
          </div>
        </div>

        <div class="analogy-box">
          <h3>üéØ ¬øC√≥mo Identificar el Tipo de Muestra?</h3>
          <p><strong>Pregunta clave:</strong> ¬øLas observaciones est√°n naturalmente emparejadas?</p>
          <ul>
            <li><strong>S√ç</strong> ‚Üí Muestras dependientes (usa prueba t de datos pareados)</li>
            <li>
              <strong>NO</strong> ‚Üí Muestras independientes (usa prueba z o t de dos muestras)
            </li>
          </ul>
        </div>
      </div>

      <!-- PROCEDIMIENTO DE 5 PASOS -->
      <div v-if="activeTab === 'cinco-pasos'" class="content-section">
        <h2>Procedimiento General de 5 Pasos</h2>

        <div class="intro-content">
          <p>
            El procedimiento para realizar pruebas de hip√≥tesis de dos muestras sigue los mismos
            cinco pasos que las pruebas de una muestra, pero adaptado para comparar dos grupos.
          </p>
        </div>

        <div class="steps-container">
          <div class="step-card">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Establecer las Hip√≥tesis</h3>
              <p>Definir la hip√≥tesis nula (H‚ÇÄ) y la hip√≥tesis alternativa (H‚ÇÅ)</p>
              <div class="step-detail">
                <h4>Para Diferencia de Medias:</h4>
                <ul>
                  <li><strong>H‚ÇÄ:</strong> Œº‚ÇÅ = Œº‚ÇÇ o Œº‚ÇÅ - Œº‚ÇÇ = 0 (no hay diferencia)</li>
                  <li>
                    <strong>H‚ÇÅ:</strong> Œº‚ÇÅ ‚â† Œº‚ÇÇ (dos colas), Œº‚ÇÅ &gt; Œº‚ÇÇ (cola derecha), o Œº‚ÇÅ &lt;
                    Œº‚ÇÇ (cola izquierda)
                  </li>
                </ul>

                <h4>Para Diferencia de Proporciones:</h4>
                <ul>
                  <li><strong>H‚ÇÄ:</strong> œÄ‚ÇÅ = œÄ‚ÇÇ o œÄ‚ÇÅ - œÄ‚ÇÇ = 0 (no hay diferencia)</li>
                  <li>
                    <strong>H‚ÇÅ:</strong> œÄ‚ÇÅ ‚â† œÄ‚ÇÇ (dos colas), œÄ‚ÇÅ &gt; œÄ‚ÇÇ (cola derecha), o œÄ‚ÇÅ &lt;
                    œÄ‚ÇÇ (cola izquierda)
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Seleccionar el Nivel de Significancia (Œ±)</h3>
              <p>Establecer la probabilidad de cometer un error tipo I</p>
              <div class="step-detail">
                <div class="alpha-levels">
                  <div class="alpha-option">
                    <strong>Œ± = 0.10 (10%)</strong> - Nivel m√°s permisivo
                  </div>
                  <div class="alpha-option"><strong>Œ± = 0.05 (5%)</strong> - Nivel m√°s com√∫n</div>
                  <div class="alpha-option">
                    <strong>Œ± = 0.01 (1%)</strong> - Nivel m√°s estricto
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Identificar el Estad√≠stico de Prueba</h3>
              <p>Seleccionar z o t seg√∫n el tipo de datos y condiciones</p>
              <div class="step-detail">
                <div class="important-note">
                  <h4>üí° Decisi√≥n del Estad√≠stico</h4>
                  <ul>
                    <li><strong>z:</strong> Para proporciones o medias con œÉ conocidas</li>
                    <li><strong>t:</strong> Para medias con œÉ desconocidas (m√°s com√∫n)</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Formular la Regla de Decisi√≥n</h3>
              <p>Determinar los valores cr√≠ticos seg√∫n Œ± y el tipo de prueba</p>
              <div class="step-detail">
                <p>
                  Calcular los valores cr√≠ticos de la distribuci√≥n z o t seg√∫n corresponda,
                  considerando si es prueba de una cola o dos colas.
                </p>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">5</div>
            <div class="step-content">
              <h3>Calcular, Decidir e Interpretar</h3>
              <p>Calcular el estad√≠stico de prueba y comparar con el valor cr√≠tico</p>
              <div class="step-detail">
                <div class="decision-rules">
                  <h4>Reglas de Decisi√≥n:</h4>
                  <ul>
                    <li>
                      <strong>Si</strong> el estad√≠stico cae en la regi√≥n de rechazo ‚Üí
                      <em>Rechazar H‚ÇÄ</em>
                    </li>
                    <li>
                      <strong>Si</strong> el estad√≠stico NO cae en la regi√≥n de rechazo ‚Üí
                      <em>No rechazar H‚ÇÄ</em>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ¬øVARIANZAS IGUALES O DIFERENTES? -->
      <div v-if="activeTab === 'igualdad-varianzas'" class="content-section">
        <h2>¬øC√≥mo Determinar si las Varianzas son Iguales o Diferentes?</h2>

        <div class="intro-box">
          <h3>‚ùì Pregunta Clave</h3>
          <p>
            <strong>No siempre se asume que las varianzas son iguales.</strong> La decisi√≥n depende
            del an√°lisis de los datos y del contexto del problema. Esta elecci√≥n determina qu√©
            f√≥rmula usar en la prueba de hip√≥tesis para dos medias con œÉ desconocidas.
          </p>
        </div>

        <div class="steps-container">
          <!-- M√©todo 1: Observaci√≥n Visual -->
          <div class="step-card">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Observaci√≥n Visual de los Datos</h3>
              <p>
                La primera verificaci√≥n es <strong>observar la dispersi√≥n de los datos</strong>
                mediante gr√°ficas de puntos, diagramas de caja o histogramas.
              </p>

              <div class="example-box">
                <h4>üìä Ejemplo: Toallas de Papel</h4>
                <p><strong>Datos observados:</strong></p>
                <ul>
                  <li>Marca 1: datos var√≠an de 1 ml a 12 ml (rango = 11 ml)</li>
                  <li>Marca 2: datos var√≠an de 6 ml a 12 ml (rango = 6 ml)</li>
                </ul>
                <div class="conclusion">
                  <strong>Conclusi√≥n:</strong> La gr√°fica de puntos revel√≥
                  <strong>mayor variaci√≥n</strong> en la primera marca, por lo que se decidi√≥
                  <strong>NO asumir varianzas iguales</strong>.
                </div>
              </div>
            </div>
          </div>

          <!-- M√©todo 2: Comparaci√≥n de Desviaciones Est√°ndares -->
          <div class="step-card">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Comparaci√≥n de Desviaciones Est√°ndares Muestrales</h3>
              <p><strong>Regla pr√°ctica com√∫n:</strong></p>

              <div class="formula-box">
                <p style="text-align: center; font-size: 1.2rem; margin: 1rem 0">
                  Si
                  <span v-html="renderLatex('\\frac{s_1}{s_2}')"></span>
                  o
                  <span v-html="renderLatex('\\frac{s_2}{s_1} > 2')"></span>
                </p>
                <p style="text-align: center; font-weight: bold; color: #d32f2f">
                  ‚Üí Las varianzas probablemente <strong>NO son iguales</strong>
                </p>
              </div>

              <div class="comparison-grid">
                <div class="comparison-item">
                  <h4>‚úÖ Ejemplo: M√©todos de Ensamblaje</h4>
                  <ul>
                    <li>M√©todo Welles: s‚ÇÅ = 2.92</li>
                    <li>M√©todo Atkins: s‚ÇÇ = 2.10</li>
                    <li>Raz√≥n: 2.92 / 2.10 = 1.39</li>
                  </ul>
                  <div class="conclusion">
                    <strong>1.39 &lt; 2</strong> ‚Üí Se asume
                    <strong>varianzas iguales</strong>
                  </div>
                </div>

                <div class="comparison-item">
                  <h4>‚ùå Ejemplo: Toallas de Papel</h4>
                  <ul>
                    <li>Marca 1: s‚ÇÅ = 3.32</li>
                    <li>Marca 2: s‚ÇÇ = 1.62</li>
                    <li>Raz√≥n: 3.32 / 1.62 = 2.05</li>
                  </ul>
                  <div class="conclusion">
                    <strong>2.05 &gt; 2</strong> ‚Üí Se asume
                    <strong>varianzas desiguales</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- M√©todo 3: Contexto del Problema -->
          <div class="step-card">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Contexto del Problema</h3>
              <p>
                A veces el <strong>conocimiento del contexto</strong> te ayuda a decidir antes de
                hacer c√°lculos:
              </p>

              <div class="test-types-container">
                <div class="test-type-card">
                  <h3>‚úÖ Asumir Varianzas Iguales cuando:</h3>
                  <ul>
                    <li>
                      Los grupos provienen de poblaciones similares (ej. mismo turno de trabajo con
                      diferentes supervisores)
                    </li>
                    <li>Los procesos de medici√≥n son id√©nticos</li>
                    <li>Los tama√±os muestrales son similares</li>
                    <li>Se trata de grupos homog√©neos</li>
                  </ul>
                </div>

                <div class="test-type-card">
                  <h3>‚ùå Asumir Varianzas Desiguales cuando:</h3>
                  <ul>
                    <li>
                      Los grupos son muy diferentes (ej. expertos vs. principiantes, ni√±os vs.
                      adultos)
                    </li>
                    <li>Diferentes condiciones experimentales</li>
                    <li>Uno de los grupos es mucho m√°s variable por naturaleza</li>
                    <li>Tama√±os muestrales muy diferentes</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- M√©todo 4: Pruebas Estad√≠sticas Formales -->
          <div class="step-card">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Pruebas Estad√≠sticas Formales (Avanzado)</h3>
              <p>
                Existen pruebas formales para verificar la igualdad de varianzas, aunque no son
                obligatorias:
              </p>

              <div class="definition-box">
                <h3>üìê Prueba F para Igualdad de Varianzas</h3>
                <ul>
                  <li>
                    <strong>H‚ÇÄ:</strong>
                    <span v-html="renderLatex('\\sigma_1^2 = \\sigma_2^2')"></span>
                    (varianzas iguales)
                  </li>
                  <li>
                    <strong>H‚ÇÅ:</strong>
                    <span v-html="renderLatex('\\sigma_1^2 \\neq \\sigma_2^2')"></span>
                    (varianzas diferentes)
                  </li>
                </ul>
                <p style="margin-top: 1rem">
                  <strong>Otras pruebas disponibles:</strong> Prueba de Levene, Prueba de Bartlett
                </p>
              </div>

              <div class="important-note">
                <strong>‚ö†Ô∏è Nota:</strong> Estas pruebas estad√≠sticas formales est√°n fuera del
                alcance de este curso b√°sico, pero es √∫til saber que existen.
              </div>
            </div>
          </div>
        </div>

        <!-- ¬øQu√© hacer en cada caso? -->
        <h3 style="margin-top: 3rem; margin-bottom: 1.5rem; color: var(--primary)">
          ¬øQu√© Hacer en Cada Caso?
        </h3>

        <div class="test-types-container">
          <!-- Varianzas Iguales -->
          <div class="test-type-card">
            <h3>‚úÖ Si ASUMES Varianzas IGUALES:</h3>

            <div class="formula-section">
              <h4>1. Calculas la Varianza Conjunta (Pooled Variance):</h4>
              <div
                class="latex-formula"
                v-html="
                  renderLatexDisplay('s_p^2 = \\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1 + n_2 - 2}')
                "
              ></div>
            </div>

            <div class="formula-section">
              <h4>2. Estad√≠stico de Prueba:</h4>
              <div
                class="latex-formula"
                v-html="
                  renderLatexDisplay(
                    't = \\frac{(\\bar{X}_1 - \\bar{X}_2)}{\\sqrt{s_p^2\\left(\\frac{1}{n_1} + \\frac{1}{n_2}\\right)}}',
                  )
                "
              ></div>
            </div>

            <div class="formula-section">
              <h4>3. Grados de Libertad:</h4>
              <div class="latex-formula" v-html="renderLatexDisplay('gl = n_1 + n_2 - 2')"></div>
            </div>

            <div class="conclusion">
              <strong>‚úì Ventaja:</strong> M√°s poder estad√≠stico si la suposici√≥n es correcta.
              Combina la informaci√≥n de ambas muestras.
            </div>
          </div>

          <!-- Varianzas Desiguales -->
          <div class="test-type-card">
            <h3>‚ùå Si ASUMES Varianzas DESIGUALES:</h3>

            <div class="formula-section">
              <h4>1. NO calculas varianza conjunta, usas ambas por separado:</h4>
              <div
                class="latex-formula"
                v-html="
                  renderLatexDisplay(
                    't = \\frac{(\\bar{X}_1 - \\bar{X}_2)}{\\sqrt{\\frac{s_1^2}{n_1} + \\frac{s_2^2}{n_2}}}',
                  )
                "
              ></div>
            </div>

            <div class="formula-section">
              <h4>2. Grados de Libertad Ajustados (F√≥rmula de Welch):</h4>
              <div
                class="latex-formula"
                v-html="
                  renderLatexDisplay(
                    'gl = \\frac{\\left(\\frac{s_1^2}{n_1} + \\frac{s_2^2}{n_2}\\right)^2}{\\frac{(s_1^2/n_1)^2}{n_1-1} + \\frac{(s_2^2/n_2)^2}{n_2-1}}',
                  )
                "
              ></div>
              <p style="text-align: center; margin-top: 1rem">
                <em>(Se redondea hacia abajo)</em>
              </p>
            </div>

            <div class="conclusion">
              <strong>‚úì Ventaja:</strong> M√°s robusto, no requiere supuestos estrictos. Es v√°lido
              incluso si las varianzas son realmente iguales.
            </div>
          </div>
        </div>

        <!-- Recomendaci√≥n Pr√°ctica -->
        <div class="important-note" style="margin-top: 2rem">
          <h3>üí° Recomendaci√≥n Pr√°ctica</h3>
          <p>
            <strong>Cuando tengas duda, es m√°s seguro asumir varianzas desiguales.</strong>
            La prueba con varianzas desiguales es m√°s conservadora y sigue siendo v√°lida incluso si
            las varianzas son iguales, mientras que lo contrario puede llevar a conclusiones
            err√≥neas.
          </p>
          <p style="margin-top: 1rem">
            <strong>‚ö†Ô∏è Regla importante:</strong> El problema debe indicar expl√≠citamente que se
            asumen varianzas iguales. Si no se especifica, lo m√°s prudente es usar el m√©todo de
            varianzas desiguales.
          </p>
        </div>

        <!-- Tabla Resumen Decisional -->
        <h3 style="margin-top: 3rem; margin-bottom: 1.5rem; color: var(--primary)">
          Resumen: Gu√≠a de Decisi√≥n
        </h3>

        <div class="comparison-table">
          <table>
            <thead>
              <tr>
                <th style="width: 50%">Evidencia</th>
                <th style="width: 50%">Decisi√≥n</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Raz√≥n s‚ÇÅ/s‚ÇÇ &lt; 2 y contexto similar</td>
                <td><strong style="color: #388e3c">‚úì Varianzas IGUALES</strong></td>
              </tr>
              <tr>
                <td>Raz√≥n s‚ÇÅ/s‚ÇÇ &gt; 2 o dispersi√≥n visiblemente diferente</td>
                <td><strong style="color: #d32f2f">‚úó Varianzas DESIGUALES</strong></td>
              </tr>
              <tr>
                <td>El problema dice "asuma varianzas iguales"</td>
                <td><strong style="color: #388e3c">‚úì Varianzas IGUALES</strong></td>
              </tr>
              <tr>
                <td>Sin informaci√≥n clara o en duda</td>
                <td>
                  <strong style="color: #d32f2f">‚úó Varianzas DESIGUALES (m√°s conservador)</strong>
                </td>
              </tr>
              <tr>
                <td>Grupos muy diferentes por naturaleza</td>
                <td><strong style="color: #d32f2f">‚úó Varianzas DESIGUALES</strong></td>
              </tr>
              <tr>
                <td>Grupos similares y homog√©neos</td>
                <td><strong style="color: #388e3c">‚úì Varianzas IGUALES</strong></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="analogy-box" style="margin-top: 2rem">
          <h3>üéØ Conclusi√≥n Clave</h3>
          <p>
            La elecci√≥n entre asumir varianzas iguales o desiguales afecta directamente la f√≥rmula
            del estad√≠stico de prueba y los grados de libertad. Es una decisi√≥n fundamental que debe
            tomarse <strong>antes</strong> de realizar los c√°lculos de la prueba de hip√≥tesis.
          </p>
          <p style="margin-top: 1rem">
            En los ejemplos siguientes ver√°s c√≥mo esta decisi√≥n se aplica en casos pr√°cticos reales.
          </p>
        </div>
      </div>

      <!-- PRUEBAS PARA DOS MEDIAS (œÉ CONOCIDAS) -->
      <div v-if="activeTab === 'medias-sigma-conocida'" class="content-section">
        <h2>Pruebas para Dos Medias con œÉ Conocidas (Prueba z)</h2>

        <div class="intro-box">
          <h3>¬øCu√°ndo usar esta prueba?</h3>
          <ul>
            <li>Las muestras provienen de poblaciones <strong>independientes</strong></li>
            <li>Ambas poblaciones siguen la <strong>distribuci√≥n normal</strong></li>
            <li>
              Las <strong>desviaciones est√°ndares poblacionales (œÉ‚ÇÅ y œÉ‚ÇÇ) son conocidas</strong>
            </li>
          </ul>
        </div>

        <div class="formula-section">
          <h3>F√≥rmula del Estad√≠stico de Prueba z</h3>
          <div
            v-html="
              renderLatexDisplay(
                'z = \\frac{(\\bar{X}_1 - \\bar{X}_2)}{\\sqrt{\\frac{\\sigma_1^2}{n_1} + \\frac{\\sigma_2^2}{n_2}}}',
              )
            "
          ></div>

          <p><strong>Donde:</strong></p>
          <ul>
            <li>
              <span v-html="renderLatex('\\bar{X}_1')"></span> y
              <span v-html="renderLatex('\\bar{X}_2')"></span> son las medias muestrales
            </li>
            <li>
              <span v-html="renderLatex('\\sigma_1')"></span> y
              <span v-html="renderLatex('\\sigma_2')"></span> son las desviaciones est√°ndares
              poblacionales
            </li>
            <li>
              <span v-html="renderLatex('n_1')"></span> y
              <span v-html="renderLatex('n_2')"></span> son los tama√±os muestrales
            </li>
          </ul>
        </div>

        <div class="examples-section">
          <h3>Ejemplo Completo: Sistema Fast Lane en FoodTown</h3>

          <div class="example-box">
            <p><strong>Situaci√≥n:</strong></p>
            <p>
              Una cadena de supermercados quiere comparar el tiempo medio de pago entre el m√©todo
              tradicional y el nuevo sistema Fast Lane. Se sabe que œÉ‚ÇÅ = 0.40 minutos para el m√©todo
              tradicional y œÉ‚ÇÇ = 0.30 minutos para Fast Lane.
            </p>

            <h4>Paso 1: Establecer las Hip√≥tesis</h4>
            <ul>
              <li>H‚ÇÄ: ¬µ‚ÇÅ ‚â§ ¬µ‚ÇÇ (Fast Lane no es m√°s r√°pido)</li>
              <li>H‚ÇÅ: ¬µ‚ÇÅ &gt; ¬µ‚ÇÇ (Fast Lane es m√°s r√°pido)</li>
            </ul>
            <p><em>Es una prueba de cola derecha</em></p>

            <h4>Paso 2: Nivel de Significancia</h4>
            <p>Œ± = 0.01 (1%)</p>

            <h4>Paso 3: Datos de las Muestras</h4>
            <ul>
              <li>
                M√©todo tradicional:
                <span v-html="renderLatex('\\bar{X}_1 = 5.50')"></span> min, n‚ÇÅ = 50, œÉ‚ÇÅ = 0.40
              </li>
              <li>
                Fast Lane: <span v-html="renderLatex('\\bar{X}_2 = 5.30')"></span> min, n‚ÇÇ = 100, œÉ‚ÇÇ
                = 0.30
              </li>
            </ul>

            <h4>Paso 4: Determinar el Valor Cr√≠tico</h4>
            <p>Como es prueba de cola derecha con Œ± = 0.01:</p>
            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>from scipy.stats import norm
alpha = 0.01
z_critico = norm.ppf(1 - alpha)
print(f"Valor cr√≠tico: {z_critico:.3f}")
# Resultado: 2.326</code></pre>
            </div>
            <p class="highlight-result">‚úì Valor cr√≠tico: z = 2.33</p>
            <p>Regi√≥n de rechazo: z &gt; 2.33</p>

            <h4>Paso 5: Calcular el Estad√≠stico de Prueba</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    'z = \\frac{(5.50 - 5.30)}{\\sqrt{\\frac{0.40^2}{50} + \\frac{0.30^2}{100}}} = \\frac{0.20}{\\sqrt{0.0032 + 0.0009}} = \\frac{0.20}{0.064} = 3.13',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>import math
x1_bar = 5.50
x2_bar = 5.30
sigma1 = 0.40
sigma2 = 0.30
n1 = 50
n2 = 100

z = (x1_bar - x2_bar) / math.sqrt((sigma1**2/n1) + (sigma2**2/n2))
print(f"Estad√≠stico z: {z:.2f}")
# Resultado: 3.13</code></pre>
            </div>

            <h4>Paso 6: Tomar la Decisi√≥n</h4>
            <div class="decision-rule">
              <p><strong>Comparaci√≥n:</strong> z = 3.13 &gt; 2.33</p>
              <p>El estad√≠stico z S√ç cae en la regi√≥n de rechazo</p>
              <div class="decision-highlight"><strong>Decisi√≥n:</strong> Rechazar H‚ÇÄ</div>
            </div>

            <div class="conclusion">
              <strong>Conclusi√≥n:</strong> Hay evidencia suficiente para afirmar que el m√©todo Fast
              Lane es significativamente m√°s r√°pido que el m√©todo tradicional al nivel de
              significancia del 1%.
            </div>
          </div>
        </div>

        <div class="tip-section">
          <h3>üí° Interpretaci√≥n del Valor p</h3>
          <p>Para este ejemplo, el valor p ser√≠a:</p>
          <div class="code-block">
            <pre><code>from scipy.stats import norm
p_value = 1 - norm.cdf(3.13)
print(f"Valor p: {p_value:.4f}")
# Resultado: 0.0009</code></pre>
          </div>
          <p>
            Un valor p de 0.0009 es muy peque√±o, indicando fuerte evidencia contra H‚ÇÄ. La
            probabilidad de observar una diferencia tan grande (o mayor) por azar es de solo 0.09%.
          </p>
        </div>
      </div>

      <!-- PRUEBAS PARA DOS PROPORCIONES -->
      <div v-if="activeTab === 'proporciones'" class="content-section">
        <h2>Pruebas para Dos Proporciones (Prueba z)</h2>

        <div class="intro-box">
          <h3>¬øCu√°ndo usar esta prueba?</h3>
          <ul>
            <li>Se comparan proporciones o porcentajes de dos poblaciones</li>
            <li>Las muestras son lo suficientemente grandes (nœÄ ‚â• 5 y n(1-œÄ) ‚â• 5)</li>
            <li>Los datos provienen de conteos con dos resultados posibles (√©xito/fracaso)</li>
          </ul>
        </div>

        <div class="formula-section">
          <h3>F√≥rmula del Estad√≠stico de Prueba z</h3>
          <div
            v-html="
              renderLatexDisplay(
                'z = \\frac{(p_1 - p_2)}{\\sqrt{p_c(1-p_c)\\left(\\frac{1}{n_1} + \\frac{1}{n_2}\\right)}}',
              )
            "
          ></div>

          <p>
            <strong>Donde p<sub>c</sub> es la proporci√≥n conjunta, calculada como:</strong>
          </p>
          <div v-html="renderLatexDisplay('p_c = \\frac{X_1 + X_2}{n_1 + n_2}')"></div>

          <ul>
            <li>p‚ÇÅ y p‚ÇÇ son las proporciones muestrales</li>
            <li>X‚ÇÅ y X‚ÇÇ son el n√∫mero de √©xitos en cada muestra</li>
            <li>n‚ÇÅ y n‚ÇÇ son los tama√±os muestrales</li>
            <li>
              p<sub>c</sub> es la proporci√≥n combinada (se usa bajo el supuesto de que H‚ÇÄ es
              verdadera)
            </li>
          </ul>
        </div>

        <div class="examples-section">
          <h3>Ejemplo Completo: Perfume Heavenly</h3>

          <div class="example-box">
            <p><strong>Situaci√≥n:</strong></p>
            <p>
              Una compa√±√≠a quiere saber si hay diferencia entre las proporciones de mujeres j√≥venes
              y mayores que comprar√≠an su nuevo perfume.
            </p>

            <h4>Paso 1: Establecer las Hip√≥tesis</h4>
            <ul>
              <li>H‚ÇÄ: œÄ‚ÇÅ = œÄ‚ÇÇ (no hay diferencia entre las proporciones)</li>
              <li>H‚ÇÅ: œÄ‚ÇÅ ‚â† œÄ‚ÇÇ (hay diferencia entre las proporciones)</li>
            </ul>
            <p><em>Es una prueba de dos colas</em></p>

            <h4>Paso 2: Nivel de Significancia</h4>
            <p>Œ± = 0.05 (5%)</p>

            <h4>Paso 3: Datos de las Muestras</h4>
            <ul>
              <li>Mujeres j√≥venes: 19 de 100 comprar√≠an (p‚ÇÅ = 0.19)</li>
              <li>Mujeres mayores: 62 de 200 comprar√≠an (p‚ÇÇ = 0.31)</li>
            </ul>

            <h4>Paso 4: Calcular la Proporci√≥n Conjunta</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay('p_c = \\frac{19 + 62}{100 + 200} = \\frac{81}{300} = 0.27')
                "
              ></div>
            </div>

            <h4>Paso 5: Determinar el Valor Cr√≠tico</h4>
            <p>Como es prueba de dos colas con Œ± = 0.05:</p>
            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>from scipy.stats import norm
alpha = 0.05
z_critico = norm.ppf(1 - alpha/2)
print(f"Valor cr√≠tico: ¬±{z_critico:.3f}")
# Resultado: ¬±1.960</code></pre>
            </div>
            <p class="highlight-result">‚úì Valores cr√≠ticos: z = ¬±1.96</p>
            <p>Regi√≥n de rechazo: z &lt; -1.96 o z &gt; 1.96</p>

            <h4>Paso 6: Calcular el Estad√≠stico de Prueba</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    'z = \\frac{(0.19 - 0.31)}{\\sqrt{0.27(1-0.27)\\left(\\frac{1}{100} + \\frac{1}{200}\\right)}}',
                  )
                "
              ></div>
              <div
                v-html="
                  renderLatexDisplay(
                    'z = \\frac{-0.12}{\\sqrt{0.27 \\times 0.73 \\times 0.015}} = \\frac{-0.12}{\\sqrt{0.002955}} = \\frac{-0.12}{0.0543} = -2.21',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>import math
x1 = 19
n1 = 100
x2 = 62
n2 = 200

p1 = x1 / n1
p2 = x2 / n2
pc = (x1 + x2) / (n1 + n2)

z = (p1 - p2) / math.sqrt(pc * (1 - pc) * (1/n1 + 1/n2))
print(f"Estad√≠stico z: {z:.2f}")
# Resultado: -2.21</code></pre>
            </div>

            <h4>Paso 7: Tomar la Decisi√≥n</h4>
            <div class="decision-rule">
              <p><strong>Comparaci√≥n:</strong> z = -2.21 &lt; -1.96</p>
              <p>El estad√≠stico z S√ç cae en la regi√≥n de rechazo</p>
              <div class="decision-highlight"><strong>Decisi√≥n:</strong> Rechazar H‚ÇÄ</div>
            </div>

            <div class="conclusion">
              <strong>Conclusi√≥n:</strong> Hay evidencia suficiente para afirmar que existe una
              diferencia significativa entre las proporciones de mujeres j√≥venes y mayores que
              comprar√≠an el perfume al nivel de significancia del 5%.
            </div>
          </div>
        </div>

        <div class="tip-section">
          <h3>‚ö†Ô∏è Verificaci√≥n de Condiciones</h3>
          <p>Antes de realizar la prueba, verifica que se cumplan las condiciones:</p>
          <div class="code-block">
            <pre><code># Para este ejemplo:
n1 * p1 = 100 * 0.19 = 19 ‚â• 5 ‚úì
n1 * (1-p1) = 100 * 0.81 = 81 ‚â• 5 ‚úì
n2 * p2 = 200 * 0.31 = 62 ‚â• 5 ‚úì
n2 * (1-p2) = 200 * 0.69 = 138 ‚â• 5 ‚úì

Todas las condiciones se cumplen, podemos usar la prueba z.</code></pre>
          </div>
        </div>
      </div>

      <!-- PRUEBAS PARA DOS MEDIAS (œÉ DESCONOCIDAS E IGUALES) -->
      <div v-if="activeTab === 'medias-sigma-igual'" class="content-section">
        <h2>Pruebas para Dos Medias con œÉ Desconocidas e Iguales (Prueba t)</h2>

        <div class="intro-box">
          <h3>¬øCu√°ndo usar esta prueba?</h3>
          <ul>
            <li>
              Las desviaciones est√°ndares poblacionales <strong>no se conocen</strong> pero se
              suponen <strong>iguales</strong>
            </li>
            <li>Las poblaciones son independientes y siguen distribuci√≥n normal</li>
            <li>Se utiliza la <strong>distribuci√≥n t</strong> como estad√≠stico de prueba</li>
          </ul>
        </div>

        <div class="formula-section">
          <h3>F√≥rmulas</h3>

          <h4>Varianza Conjunta (Pooled Variance):</h4>
          <div
            v-html="
              renderLatexDisplay('s_p^2 = \\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1 + n_2 - 2}')
            "
          ></div>

          <h4>Estad√≠stico de Prueba:</h4>
          <div
            v-html="
              renderLatexDisplay(
                't = \\frac{(\\bar{X}_1 - \\bar{X}_2)}{\\sqrt{s_p^2\\left(\\frac{1}{n_1} + \\frac{1}{n_2}\\right)}}',
              )
            "
          ></div>

          <p><strong>Grados de libertad:</strong> gl = n‚ÇÅ + n‚ÇÇ - 2</p>
        </div>

        <div class="examples-section">
          <h3>Ejemplo Completo: M√©todos de Ensamblaje</h3>

          <div class="example-box">
            <p><strong>Situaci√≥n:</strong></p>
            <p>Una empresa compara dos m√©todos para ensamblar motores. Los datos obtenidos son:</p>

            <h4>Paso 1: Datos</h4>
            <ul>
              <li>
                M√©todo Welles: n‚ÇÅ = 5, <span v-html="renderLatex('\\bar{X}_1')"></span> = 4.00 min,
                s‚ÇÅ = 2.92
              </li>
              <li>
                M√©todo Atkins: n‚ÇÇ = 6, <span v-html="renderLatex('\\bar{X}_2')"></span> = 5.00 min,
                s‚ÇÇ = 2.10
              </li>
            </ul>

            <div class="important-note">
              <h4>üîç Verificaci√≥n: ¬øVarianzas Iguales o Desiguales?</h4>
              <p><strong>Raz√≥n de desviaciones est√°ndares:</strong></p>
              <div class="calculation">
                <div
                  v-html="renderLatexDisplay('\\frac{s_1}{s_2} = \\frac{2.92}{2.10} = 1.39')"
                ></div>
              </div>
              <div class="code-block">
                <strong>Python:</strong>
                <pre><code>razon = s1 / s2
print(f"Raz√≥n s1/s2: {razon:.2f}")
# Resultado: 1.39</code></pre>
              </div>
              <div class="conclusion">
                <strong>‚úì Conclusi√≥n:</strong> Como 1.39 &lt; 2, podemos asumir
                <strong>varianzas iguales</strong> y usar la varianza conjunta (pooled variance).
              </div>
            </div>

            <h4>Paso 2: Establecer las Hip√≥tesis</h4>
            <ul>
              <li>H‚ÇÄ: ¬µ‚ÇÅ = ¬µ‚ÇÇ (no hay diferencia entre los m√©todos)</li>
              <li>H‚ÇÅ: ¬µ‚ÇÅ ‚â† ¬µ‚ÇÇ (hay diferencia entre los m√©todos)</li>
            </ul>

            <h4>Paso 3: Nivel de Significancia</h4>
            <p>Œ± = 0.10 (10%)</p>
            <p>gl = 5 + 6 - 2 = 9</p>

            <h4>Paso 4: Calcular la Varianza Conjunta</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    's_p^2 = \\frac{(5-1)(2.92)^2 + (6-1)(2.10)^2}{5 + 6 - 2} = \\frac{4(8.53) + 5(4.41)}{9} = \\frac{34.12 + 22.05}{9} = \\frac{56.17}{9} = 6.24',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>import math
n1, n2 = 5, 6
s1, s2 = 2.92, 2.10

sp2 = ((n1-1)*s1**2 + (n2-1)*s2**2) / (n1 + n2 - 2)
print(f"Varianza conjunta: {sp2:.2f}")
# Resultado: 6.24</code></pre>
            </div>

            <h4>Paso 5: Determinar el Valor Cr√≠tico</h4>
            <p>Para prueba de dos colas con Œ± = 0.10 y gl = 9:</p>
            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>from scipy.stats import t
alpha = 0.10
gl = 9
t_critico = t.ppf(1 - alpha/2, gl)
print(f"Valor cr√≠tico: ¬±{t_critico:.3f}")
# Resultado: ¬±1.833</code></pre>
            </div>
            <p class="highlight-result">‚úì Valores cr√≠ticos: t = ¬±1.833</p>

            <h4>Paso 6: Calcular el Estad√≠stico de Prueba</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    't = \\frac{(4.00 - 5.00)}{\\sqrt{6.24\\left(\\frac{1}{5} + \\frac{1}{6}\\right)}} = \\frac{-1.00}{\\sqrt{6.24(0.367)}} = \\frac{-1.00}{\\sqrt{2.29}} = \\frac{-1.00}{1.513} = -0.662',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>x1_bar, x2_bar = 4.00, 5.00
t_calc = (x1_bar - x2_bar) / math.sqrt(sp2 * (1/n1 + 1/n2))
print(f"Estad√≠stico t: {t_calc:.3f}")
# Resultado: -0.662</code></pre>
            </div>

            <h4>Paso 7: Tomar la Decisi√≥n</h4>
            <div class="decision-rule">
              <p><strong>Comparaci√≥n:</strong> -1.833 &lt; -0.662 &lt; 1.833</p>
              <p>El estad√≠stico t NO cae en la regi√≥n de rechazo</p>
              <div class="decision-highlight"><strong>Decisi√≥n:</strong> No rechazar H‚ÇÄ</div>
            </div>

            <div class="conclusion">
              <strong>Conclusi√≥n:</strong> No hay evidencia suficiente para afirmar que existe una
              diferencia significativa entre los dos m√©todos de ensamblaje al nivel de significancia
              del 10%.
            </div>
          </div>
        </div>
      </div>

      <!-- PRUEBAS PARA DOS MEDIAS (œÉ DESCONOCIDAS Y DESIGUALES) -->
      <div v-if="activeTab === 'medias-sigma-desigual'" class="content-section">
        <h2>Pruebas para Dos Medias con œÉ Desconocidas y Desiguales (Prueba t)</h2>

        <div class="intro-box">
          <h3>¬øCu√°ndo usar esta prueba?</h3>
          <ul>
            <li>
              Las desviaciones est√°ndares poblacionales <strong>no se conocen</strong> y
              <strong>no son iguales</strong>
            </li>
            <li>Las poblaciones son independientes</li>
            <li>Los grados de libertad se ajustan con una f√≥rmula especial</li>
          </ul>
        </div>

        <div class="formula-section">
          <h3>F√≥rmulas</h3>

          <h4>Estad√≠stico de Prueba:</h4>
          <div
            v-html="
              renderLatexDisplay(
                't = \\frac{(\\bar{X}_1 - \\bar{X}_2)}{\\sqrt{\\frac{s_1^2}{n_1} + \\frac{s_2^2}{n_2}}}',
              )
            "
          ></div>

          <h4>Grados de Libertad Ajustados:</h4>
          <div
            v-html="
              renderLatexDisplay(
                'gl = \\frac{\\left(\\frac{s_1^2}{n_1} + \\frac{s_2^2}{n_2}\\right)^2}{\\frac{(s_1^2/n_1)^2}{n_1-1} + \\frac{(s_2^2/n_2)^2}{n_2-1}}',
              )
            "
          ></div>
          <p><em>Se redondea hacia abajo</em></p>
        </div>

        <div class="examples-section">
          <h3>Ejemplo Completo: Absorbencia de Toallas de Papel</h3>

          <div class="example-box">
            <p><strong>Situaci√≥n:</strong></p>
            <p>Se comparan dos marcas de toallas de papel. Los datos obtenidos son:</p>

            <h4>Paso 1: Datos</h4>
            <ul>
              <li>
                Marca 1: n‚ÇÅ = 9, <span v-html="renderLatex('\\bar{X}_1')"></span> = 6.44 ml, s‚ÇÅ =
                3.32
              </li>
              <li>
                Marca 2: n‚ÇÇ = 12, <span v-html="renderLatex('\\bar{X}_2')"></span> = 9.42 ml, s‚ÇÇ =
                1.62
              </li>
            </ul>

            <div class="important-note">
              <h4>üîç Verificaci√≥n: ¬øVarianzas Iguales o Desiguales?</h4>
              <p><strong>Raz√≥n de desviaciones est√°ndares:</strong></p>
              <div class="calculation">
                <div
                  v-html="renderLatexDisplay('\\frac{s_1}{s_2} = \\frac{3.32}{1.62} = 2.05')"
                ></div>
              </div>
              <div class="code-block">
                <strong>Python:</strong>
                <pre><code>s1, s2 = 3.32, 1.62
razon = s1 / s2
print(f"Raz√≥n s1/s2: {razon:.2f}")
# Resultado: 2.05</code></pre>
              </div>
              <div class="conclusion" style="background: #f8d7da; border-left-color: #d32f2f">
                <strong>‚úó Conclusi√≥n:</strong> Como 2.05 &gt; 2, debemos asumir
                <strong>varianzas desiguales</strong> y usar la f√≥rmula de Welch (sin varianza
                conjunta).
              </div>
              <p style="margin-top: 1rem">
                <strong>Observaci√≥n adicional:</strong> Los datos de la Marca 1 var√≠an de 1 ml a 12
                ml (rango = 11), mientras que la Marca 2 var√≠a de 6 ml a 12 ml (rango = 6),
                confirmando visualmente la mayor dispersi√≥n en la Marca 1.
              </p>
            </div>

            <h4>Paso 2: Establecer las Hip√≥tesis</h4>
            <ul>
              <li>H‚ÇÄ: ¬µ‚ÇÅ = ¬µ‚ÇÇ (no hay diferencia en la absorbencia)</li>
              <li>H‚ÇÅ: ¬µ‚ÇÅ ‚â† ¬µ‚ÇÇ (hay diferencia en la absorbencia)</li>
            </ul>

            <h4>Paso 3: Nivel de Significancia</h4>
            <p>Œ± = 0.10 (10%)</p>

            <h4>Paso 4: Calcular Grados de Libertad Ajustados</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    'gl = \\frac{\\left(\\frac{3.32^2}{9} + \\frac{1.62^2}{12}\\right)^2}{\\frac{(3.32^2/9)^2}{8} + \\frac{(1.62^2/12)^2}{11}} = \\frac{(1.225 + 0.219)^2}{\\frac{1.501}{8} + \\frac{0.048}{11}} = \\frac{2.086}{0.192} = 10.86 \\approx 10',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>import math
n1, n2 = 9, 12
s1, s2 = 3.32, 1.62

numerador = (s1**2/n1 + s2**2/n2)**2
denominador = (s1**2/n1)**2/(n1-1) + (s2**2/n2)**2/(n2-1)
gl = math.floor(numerador / denominador)
print(f"Grados de libertad: {gl}")
# Resultado: 10</code></pre>
            </div>

            <h4>Paso 5: Determinar el Valor Cr√≠tico</h4>
            <p>Para prueba de dos colas con Œ± = 0.10 y gl = 10:</p>
            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>from scipy.stats import t
t_critico = t.ppf(1 - 0.10/2, 10)
print(f"Valor cr√≠tico: ¬±{t_critico:.3f}")
# Resultado: ¬±1.812</code></pre>
            </div>
            <p class="highlight-result">‚úì Valores cr√≠ticos: t = ¬±1.812</p>

            <h4>Paso 6: Calcular el Estad√≠stico de Prueba</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    't = \\frac{(6.44 - 9.42)}{\\sqrt{\\frac{3.32^2}{9} + \\frac{1.62^2}{12}}} = \\frac{-2.98}{\\sqrt{1.225 + 0.219}} = \\frac{-2.98}{1.202} = -2.478',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>x1_bar, x2_bar = 6.44, 9.42
t_calc = (x1_bar - x2_bar) / math.sqrt(s1**2/n1 + s2**2/n2)
print(f"Estad√≠stico t: {t_calc:.3f}")
# Resultado: -2.478</code></pre>
            </div>

            <h4>Paso 7: Tomar la Decisi√≥n</h4>
            <div class="decision-rule">
              <p><strong>Comparaci√≥n:</strong> -2.478 &lt; -1.812</p>
              <p>El estad√≠stico t S√ç cae en la regi√≥n de rechazo</p>
              <div class="decision-highlight"><strong>Decisi√≥n:</strong> Rechazar H‚ÇÄ</div>
            </div>

            <div class="conclusion">
              <strong>Conclusi√≥n:</strong> Hay evidencia suficiente para afirmar que las tasas de
              absorci√≥n medias son diferentes entre las dos marcas al nivel de significancia del
              10%.
            </div>
          </div>
        </div>

        <div class="tip-section">
          <h3>üí° ¬øCu√°ndo usar esta prueba vs. la de varianzas iguales?</h3>
          <p>Usa esta prueba (varianzas desiguales) cuando:</p>
          <ul>
            <li>Los tama√±os de muestra son muy diferentes (n‚ÇÅ ‚â† n‚ÇÇ)</li>
            <li>Las desviaciones est√°ndares muestrales son muy diferentes (s‚ÇÅ ‚â† s‚ÇÇ)</li>
            <li>No tienes raz√≥n para creer que las varianzas poblacionales son iguales</li>
          </ul>
          <p>
            <strong>Regla pr√°ctica:</strong> Si s‚ÇÅ/s‚ÇÇ &gt; 2 o s‚ÇÅ/s‚ÇÇ &lt; 0.5, usa la prueba de
            varianzas desiguales.
          </p>
        </div>
      </div>

      <!-- PRUEBAS PARA MUESTRAS DEPENDIENTES (APAREADAS) -->
      <div v-if="activeTab === 'muestras-pareadas'" class="content-section">
        <h2>Pruebas para Muestras Dependientes (Apareadas)</h2>

        <div class="intro-box">
          <h3>Concepto Clave</h3>
          <p>
            En muestras apareadas, analizamos la <strong>distribuci√≥n de las diferencias</strong>
            entre las observaciones apareadas. Solo hay una muestra: las diferencias.
          </p>
        </div>

        <div class="formula-section">
          <h3>F√≥rmula del Estad√≠stico de Prueba</h3>
          <div v-html="renderLatexDisplay('t = \\frac{\\bar{d}}{s_d / \\sqrt{n}}')"></div>

          <p><strong>Donde:</strong></p>
          <ul>
            <li><span v-html="renderLatex('\\bar{d}')"></span> es la media de las diferencias</li>
            <li>s<sub>d</sub> es la desviaci√≥n est√°ndar de las diferencias</li>
            <li>n es el n√∫mero de pares</li>
          </ul>

          <p><strong>Grados de libertad:</strong> gl = n - 1</p>
        </div>

        <div class="examples-section">
          <h3>Ejemplo Completo: Empresas de Aval√∫o</h3>

          <div class="example-box">
            <p><strong>Situaci√≥n:</strong></p>
            <p>
              Una instituci√≥n financiera compara los aval√∫os de dos empresas sobre las mismas 10
              propiedades. Las diferencias (Empresa 1 - Empresa 2) tienen media
              <span v-html="renderLatex('\\bar{d}')"></span> = 4.60 y desviaci√≥n est√°ndar s<sub
                >d</sub
              >
              = 4.40.
            </p>

            <h4>Paso 1: Establecer las Hip√≥tesis</h4>
            <ul>
              <li>H‚ÇÄ: ¬µ<sub>d</sub> = 0 (no hay diferencia entre los aval√∫os)</li>
              <li>H‚ÇÅ: ¬µ<sub>d</sub> ‚â† 0 (hay diferencia entre los aval√∫os)</li>
            </ul>

            <h4>Paso 2: Nivel de Significancia</h4>
            <p>Œ± = 0.05 (5%)</p>
            <p>gl = 10 - 1 = 9</p>

            <h4>Paso 3: Determinar el Valor Cr√≠tico</h4>
            <p>Para prueba de dos colas con Œ± = 0.05 y gl = 9:</p>
            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>from scipy.stats import t
t_critico = t.ppf(1 - 0.05/2, 9)
print(f"Valor cr√≠tico: ¬±{t_critico:.3f}")
# Resultado: ¬±2.262</code></pre>
            </div>
            <p class="highlight-result">‚úì Valores cr√≠ticos: t = ¬±2.262</p>

            <h4>Paso 4: Calcular el Estad√≠stico de Prueba</h4>
            <div class="calculation">
              <div
                v-html="
                  renderLatexDisplay(
                    't = \\frac{4.60}{4.40 / \\sqrt{10}} = \\frac{4.60}{4.40 / 3.162} = \\frac{4.60}{1.392} = 3.305',
                  )
                "
              ></div>
            </div>

            <div class="code-block">
              <strong>Python:</strong>
              <pre><code>import math
d_bar = 4.60
sd = 4.40
n = 10

t_calc = d_bar / (sd / math.sqrt(n))
print(f"Estad√≠stico t: {t_calc:.3f}")
# Resultado: 3.305</code></pre>
            </div>

            <h4>Paso 5: Tomar la Decisi√≥n</h4>
            <div class="decision-rule">
              <p><strong>Comparaci√≥n:</strong> 3.305 &gt; 2.262</p>
              <p>El estad√≠stico t S√ç cae en la regi√≥n de rechazo</p>
              <div class="decision-highlight"><strong>Decisi√≥n:</strong> Rechazar H‚ÇÄ</div>
            </div>

            <div class="conclusion">
              <strong>Conclusi√≥n:</strong> Hay evidencia suficiente para afirmar que existe una
              diferencia significativa entre los aval√∫os de las dos empresas al nivel de
              significancia del 5%.
            </div>
          </div>
        </div>

        <div class="analogy-box">
          <h3>üí° Ventaja de las Muestras Apareadas</h3>
          <p>
            Al aparear observaciones, se <strong>reduce la variaci√≥n</strong> en la distribuci√≥n del
            muestreo, eliminando la variabilidad entre sujetos y enfoc√°ndose solo en la diferencia
            entre tratamientos o condiciones.
          </p>
          <p>
            <strong>Ejemplo:</strong> En un estudio de p√©rdida de peso, al medir a las mismas
            personas antes y despu√©s del tratamiento, eliminamos la variabilidad natural entre
            personas (metabolismo, edad, etc.) y nos concentramos solo en el efecto del tratamiento.
          </p>
        </div>
      </div>

      <!-- TABLA RESUMEN -->
      <div v-if="activeTab === 'tabla-resumen'" class="content-section">
        <h2>Tabla Resumen: ¬øQu√© Prueba Usar?</h2>

        <div class="intro-content">
          <p>
            Esta tabla te ayudar√° a seleccionar la prueba apropiada seg√∫n el tipo de datos y las
            condiciones de tu problema.
          </p>
        </div>

        <div class="comparison-table">
          <table>
            <thead>
              <tr>
                <th>Situaci√≥n</th>
                <th>Estad√≠stico</th>
                <th>Condiciones</th>
                <th>Grados de Libertad</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Dos medias, œÉ conocidas</strong></td>
                <td>z</td>
                <td>Poblaciones independientes, normales, œÉ‚ÇÅ y œÉ‚ÇÇ conocidas</td>
                <td>No aplica</td>
              </tr>
              <tr>
                <td><strong>Dos proporciones</strong></td>
                <td>z</td>
                <td>Muestras grandes, datos de conteo binario</td>
                <td>No aplica</td>
              </tr>
              <tr>
                <td><strong>Dos medias, œÉ desconocidas e iguales</strong></td>
                <td>t</td>
                <td>Poblaciones independientes, normales, se agrupan varianzas</td>
                <td>n‚ÇÅ + n‚ÇÇ - 2</td>
              </tr>
              <tr>
                <td><strong>Dos medias, œÉ desconocidas y desiguales</strong></td>
                <td>t</td>
                <td>Poblaciones independientes, normales, gl ajustados</td>
                <td>F√≥rmula especial</td>
              </tr>
              <tr>
                <td><strong>Muestras apareadas</strong></td>
                <td>t</td>
                <td>Observaciones dependientes, se analizan diferencias</td>
                <td>n - 1</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="analogy-box">
          <h3>üéØ Diagrama de Decisi√≥n</h3>
          <div class="decision-flow">
            <div class="decision-step">
              <strong>1. ¬øQu√© est√°s comparando?</strong>
              <ul>
                <li>Medias ‚Üí Contin√∫a al paso 2</li>
                <li>Proporciones ‚Üí Usa prueba z para proporciones</li>
              </ul>
            </div>

            <div class="decision-step">
              <strong>2. ¬øLas observaciones est√°n apareadas?</strong>
              <ul>
                <li>S√ç ‚Üí Usa prueba t de muestras dependientes</li>
                <li>NO ‚Üí Contin√∫a al paso 3</li>
              </ul>
            </div>

            <div class="decision-step">
              <strong>3. ¬øConoces las desviaciones est√°ndares poblacionales (œÉ)?</strong>
              <ul>
                <li>S√ç ‚Üí Usa prueba z (raro en la pr√°ctica)</li>
                <li>NO ‚Üí Contin√∫a al paso 4</li>
              </ul>
            </div>

            <div class="decision-step">
              <strong>4. ¬øLas varianzas poblacionales son iguales?</strong>
              <ul>
                <li>S√ç (o puedes asumirlo) ‚Üí Usa prueba t con varianzas agrupadas</li>
                <li>NO ‚Üí Usa prueba t con varianzas desiguales y gl ajustados</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- CALCULADORA INTERACTIVA -->
      <div v-if="activeTab === 'calculadora'" class="content-section">
        <h2>Calculadora Interactiva de Pruebas de Dos Muestras</h2>

        <div class="calculator-container">
          <div class="calculator-form">
            <h3>Par√°metros de la Prueba</h3>

            <div class="form-group">
              <label>Tipo de Prueba:</label>
              <select v-model="tipoPrueba">
                <option value="medias-independientes">Diferencia de Medias (Independientes)</option>
                <option value="medias-pareadas">Diferencia de Medias (Pareadas)</option>
                <option value="proporciones">Diferencia de Proporciones</option>
              </select>
            </div>

            <!-- Formulario para Medias Independientes -->
            <div v-if="tipoPrueba === 'medias-independientes'">
              <h4>Muestra 1</h4>
              <div class="form-row">
                <div class="form-group">
                  <label>Media (xÃÑ‚ÇÅ):</label>
                  <input v-model.number="media1" type="number" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Desviaci√≥n (s‚ÇÅ):</label>
                  <input v-model.number="desv1" type="number" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Tama√±o (n‚ÇÅ):</label>
                  <input v-model.number="n1" type="number" />
                </div>
              </div>

              <h4>Muestra 2</h4>
              <div class="form-row">
                <div class="form-group">
                  <label>Media (xÃÑ‚ÇÇ):</label>
                  <input v-model.number="media2" type="number" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Desviaci√≥n (s‚ÇÇ):</label>
                  <input v-model.number="desv2" type="number" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Tama√±o (n‚ÇÇ):</label>
                  <input v-model.number="n2" type="number" />
                </div>
              </div>
            </div>

            <!-- Formulario para Medias Pareadas -->
            <div v-if="tipoPrueba === 'medias-pareadas'">
              <div class="form-group">
                <label>Media de diferencias (dÃÑ):</label>
                <input v-model.number="mediaDiferencias" type="number" step="0.01" />
              </div>
              <div class="form-group">
                <label>Desviaci√≥n de diferencias (s_d):</label>
                <input v-model.number="desvDiferencias" type="number" step="0.01" />
              </div>
              <div class="form-group">
                <label>N√∫mero de pares (n):</label>
                <input v-model.number="nPares" type="number" />
              </div>
            </div>

            <!-- Formulario para Proporciones -->
            <div v-if="tipoPrueba === 'proporciones'">
              <h4>Muestra 1</h4>
              <div class="form-row">
                <div class="form-group">
                  <label>√âxitos (x‚ÇÅ):</label>
                  <input v-model.number="exitos1" type="number" />
                </div>
                <div class="form-group">
                  <label>Tama√±o (n‚ÇÅ):</label>
                  <input v-model.number="n1Prop" type="number" />
                </div>
              </div>

              <h4>Muestra 2</h4>
              <div class="form-row">
                <div class="form-group">
                  <label>√âxitos (x‚ÇÇ):</label>
                  <input v-model.number="exitos2" type="number" />
                </div>
                <div class="form-group">
                  <label>Tama√±o (n‚ÇÇ):</label>
                  <input v-model.number="n2Prop" type="number" />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Nivel de significancia (Œ±):</label>
              <select v-model="alpha">
                <option value="0.10">0.10</option>
                <option value="0.05">0.05</option>
                <option value="0.01">0.01</option>
              </select>
            </div>

            <div class="form-group">
              <label>Tipo de hip√≥tesis alternativa:</label>
              <select v-model="tipoHipotesis">
                <option value="two-tailed">Dos colas (‚â†)</option>
                <option value="left-tailed">Cola izquierda (&lt;)</option>
                <option value="right-tailed">Cola derecha (>)</option>
              </select>
            </div>

            <button @click="calcular" class="calculate-btn">Calcular</button>
          </div>

          <!-- Resultados -->
          <div v-if="resultado" class="calculator-results">
            <h3>Resultados</h3>

            <div class="result-item">
              <strong>Hip√≥tesis:</strong>
              <div v-html="resultado.hipotesis"></div>
            </div>

            <div class="result-item">
              <strong>Estad√≠stico calculado:</strong>
              <span v-html="resultado.estadistico"></span>
            </div>

            <div class="result-item">
              <strong>Valor cr√≠tico:</strong>
              <span v-html="resultado.valorCritico"></span>
            </div>

            <div class="result-item">
              <strong>Regi√≥n de rechazo:</strong>
              <span v-html="resultado.regionRechazo"></span>
            </div>

            <div class="result-item">
              <strong>Decisi√≥n:</strong>
              <span :class="resultado.decisionClass" v-html="resultado.decision"></span>
            </div>

            <div v-if="resultado.conclusion" class="result-item">
              <strong>Conclusi√≥n:</strong>
              <span v-html="resultado.conclusion"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import katex from 'katex'
import 'katex/dist/katex.min.css'

// @ts-expect-error - jstat no tiene tipos oficiales
import * as jStat from 'jstat'

// Interfaz para el resultado
interface ResultadoPrueba {
  hipotesis: string
  estadistico: string
  valorCritico: string
  regionRechazo: string
  decision: string
  decisionClass: string
  conclusion: string
}

// Funciones para renderizar LaTeX
const renderLatex = (latex: string): string => {
  try {
    return katex.renderToString(latex, {
      throwOnError: false,
      displayMode: false,
    })
  } catch (error) {
    console.error('Error rendering LaTeX:', error)
    return latex
  }
}

const renderLatexDisplay = (latex: string): string => {
  try {
    return katex.renderToString(latex, {
      throwOnError: false,
      displayMode: true,
    })
  } catch (error) {
    console.error('Error rendering LaTeX:', error)
    return latex
  }
}

// Configuraci√≥n de pesta√±as
const tabs = [
  { id: 'introduccion', label: 'Introducci√≥n' },
  { id: 'tipos-muestras', label: 'Muestras Independientes vs. Dependientes' },
  { id: 'cinco-pasos', label: 'Procedimiento de 5 Pasos' },
  { id: 'igualdad-varianzas', label: '¬øVarianzas Iguales o Diferentes?' },
  { id: 'medias-sigma-conocida', label: 'Dos Medias (œÉ Conocidas)' },
  { id: 'proporciones', label: 'Dos Proporciones' },
  { id: 'medias-sigma-igual', label: 'Dos Medias (œÉ Desconocidas e Iguales)' },
  { id: 'medias-sigma-desigual', label: 'Dos Medias (œÉ Desconocidas y Desiguales)' },
  { id: 'muestras-pareadas', label: 'Muestras Dependientes (Apareadas)' },
  { id: 'tabla-resumen', label: 'Tabla Resumen' },
  { id: 'calculadora', label: 'Calculadora Interactiva' },
]

const activeTab = ref('introduccion')

// Variables reactivas para la calculadora
const tipoPrueba = ref('medias-independientes')
const alpha = ref('0.05')
const tipoHipotesis = ref('two-tailed')

// Variables para medias independientes
const media1 = ref(0)
const desv1 = ref(0)
const n1 = ref(0)
const media2 = ref(0)
const desv2 = ref(0)
const n2 = ref(0)

// Variables para medias pareadas
const mediaDiferencias = ref(0)
const desvDiferencias = ref(0)
const nPares = ref(0)

// Variables para proporciones
const exitos1 = ref(0)
const n1Prop = ref(0)
const exitos2 = ref(0)
const n2Prop = ref(0)

const resultado = ref<ResultadoPrueba | null>(null)

// Funci√≥n para calcular
const calcular = () => {
  let estadistico = 0
  let valorCritico = 0
  let gradosLibertad = 0
  let tipoEstadistico = 't'

  if (tipoPrueba.value === 'medias-independientes') {
    // C√°lculo para medias independientes
    const sp2 =
      ((n1.value - 1) * desv1.value ** 2 + (n2.value - 1) * desv2.value ** 2) /
      (n1.value + n2.value - 2)
    estadistico = (media1.value - media2.value) / Math.sqrt(sp2 / n1.value + sp2 / n2.value)
    gradosLibertad = n1.value + n2.value - 2

    if (tipoHipotesis.value === 'two-tailed') {
      valorCritico = jStat.studentt.inv(1 - parseFloat(alpha.value) / 2, gradosLibertad)
    } else if (tipoHipotesis.value === 'right-tailed') {
      valorCritico = jStat.studentt.inv(1 - parseFloat(alpha.value), gradosLibertad)
    } else {
      valorCritico = -jStat.studentt.inv(1 - parseFloat(alpha.value), gradosLibertad)
    }
  } else if (tipoPrueba.value === 'medias-pareadas') {
    // C√°lculo para medias pareadas
    estadistico = mediaDiferencias.value / (desvDiferencias.value / Math.sqrt(nPares.value))
    gradosLibertad = nPares.value - 1

    if (tipoHipotesis.value === 'two-tailed') {
      valorCritico = jStat.studentt.inv(1 - parseFloat(alpha.value) / 2, gradosLibertad)
    } else if (tipoHipotesis.value === 'right-tailed') {
      valorCritico = jStat.studentt.inv(1 - parseFloat(alpha.value), gradosLibertad)
    } else {
      valorCritico = -jStat.studentt.inv(1 - parseFloat(alpha.value), gradosLibertad)
    }
  } else if (tipoPrueba.value === 'proporciones') {
    // C√°lculo para proporciones
    tipoEstadistico = 'z'
    const p1 = exitos1.value / n1Prop.value
    const p2 = exitos2.value / n2Prop.value
    const p = (exitos1.value + exitos2.value) / (n1Prop.value + n2Prop.value)

    estadistico = (p1 - p2) / Math.sqrt(p * (1 - p) * (1 / n1Prop.value + 1 / n2Prop.value))

    if (tipoHipotesis.value === 'two-tailed') {
      valorCritico = jStat.normal.inv(1 - parseFloat(alpha.value) / 2, 0, 1)
    } else if (tipoHipotesis.value === 'right-tailed') {
      valorCritico = jStat.normal.inv(1 - parseFloat(alpha.value), 0, 1)
    } else {
      valorCritico = -jStat.normal.inv(1 - parseFloat(alpha.value), 0, 1)
    }
  }

  // Determinar decisi√≥n
  let decision = ''
  let decisionClass = ''
  let conclusion = ''

  if (tipoHipotesis.value === 'two-tailed') {
    if (Math.abs(estadistico) > Math.abs(valorCritico)) {
      decision = 'Rechazar H‚ÇÄ'
      decisionClass = 'reject'
      conclusion = 'Hay evidencia suficiente para concluir que existe una diferencia significativa'
    } else {
      decision = 'No rechazar H‚ÇÄ'
      decisionClass = 'not-reject'
      conclusion =
        'No hay evidencia suficiente para concluir que existe una diferencia significativa'
    }
  } else {
    if (tipoHipotesis.value === 'right-tailed' && estadistico > valorCritico) {
      decision = 'Rechazar H‚ÇÄ'
      decisionClass = 'reject'
      conclusion =
        'Hay evidencia suficiente para concluir que el primer grupo es significativamente mayor'
    } else if (tipoHipotesis.value === 'left-tailed' && estadistico < valorCritico) {
      decision = 'Rechazar H‚ÇÄ'
      decisionClass = 'reject'
      conclusion =
        'Hay evidencia suficiente para concluir que el primer grupo es significativamente menor'
    } else {
      decision = 'No rechazar H‚ÇÄ'
      decisionClass = 'not-reject'
      conclusion =
        'No hay evidencia suficiente para concluir que existe una diferencia significativa'
    }
  }

  // Formatear hip√≥tesis
  let hipotesis = ''
  if (tipoPrueba.value.includes('medias')) {
    hipotesis = renderLatexDisplay('H_0: \\mu_1 - \\mu_2 = 0')
    if (tipoHipotesis.value === 'two-tailed') {
      hipotesis += '<br>' + renderLatexDisplay('H_1: \\mu_1 - \\mu_2 \\neq 0')
    } else if (tipoHipotesis.value === 'right-tailed') {
      hipotesis += '<br>' + renderLatexDisplay('H_1: \\mu_1 - \\mu_2 > 0')
    } else {
      hipotesis += '<br>' + renderLatexDisplay('H_1: \\mu_1 - \\mu_2 < 0')
    }
  } else {
    hipotesis = renderLatexDisplay('H_0: p_1 - p_2 = 0')
    if (tipoHipotesis.value === 'two-tailed') {
      hipotesis += '<br>' + renderLatexDisplay('H_1: p_1 - p_2 \\neq 0')
    } else if (tipoHipotesis.value === 'right-tailed') {
      hipotesis += '<br>' + renderLatexDisplay('H_1: p_1 - p_2 > 0')
    } else {
      hipotesis += '<br>' + renderLatexDisplay('H_1: p_1 - p_2 < 0')
    }
  }

  // Formatear regi√≥n de rechazo
  let regionRechazo = ''
  if (tipoHipotesis.value === 'two-tailed') {
    regionRechazo = renderLatex(
      `t < -${valorCritico.toFixed(3)} \\text{ o } t > ${valorCritico.toFixed(3)}`,
    )
  } else if (tipoHipotesis.value === 'right-tailed') {
    regionRechazo = renderLatex(`t > ${valorCritico.toFixed(3)}`)
  } else {
    regionRechazo = renderLatex(`t < ${valorCritico.toFixed(3)}`)
  }

  resultado.value = {
    hipotesis,
    estadistico: renderLatex(`${tipoEstadistico.toUpperCase()} = ${estadistico.toFixed(4)}`),
    valorCritico: renderLatex(
      `${tipoEstadistico.toUpperCase()}_{cr√≠tico} = ${tipoHipotesis.value === 'two-tailed' ? '¬±' : ''}${valorCritico.toFixed(3)}`,
    ),
    regionRechazo,
    decision,
    decisionClass,
    conclusion,
  }
}
</script>

<style scoped>
@import '@/assets/styles/main.css';

.hipotesis-dos-muestras-view {
  padding-bottom: var(--spacing-2xl);
}

/* Tabs */
.tabs {
  display: flex;
  justify-content: center;
  margin-bottom: var(--spacing-xl);
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  background: var(--surface);
  border-radius: var(--radius-full);
  padding: var(--spacing-xs);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
  max-width: fit-content;
  margin-left: auto;
  margin-right: auto;
}

.tab-button {
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  border-radius: var(--radius-full);
  transition: var(--transition);
  font-weight: 600;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-size: 0.9375rem;
}

.tab-button.active {
  background: var(--primary);
  color: white;
  box-shadow: var(--shadow-sm);
}

.tab-button:hover:not(.active) {
  background: var(--surface-variant);
  color: var(--text-primary);
}

/* Content Sections */
.content-section {
  background: var(--surface);
  padding: var(--spacing-xl);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  margin-bottom: var(--spacing-xl);
  border: 1px solid var(--border);
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.content-section h2 {
  color: var(--primary);
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-sm);
  border-bottom: 2px solid var(--border-light);
  font-size: 1.75rem;
}

/* Content Boxes */
.intro-box,
.definition-box,
.analogy-box,
.important-note,
.tip-section,
.decision-rule,
.conclusion,
.example-box,
.example-card {
  padding: var(--spacing-lg);
  border-radius: var(--radius-md);
  margin: var(--spacing-lg) 0;
  border: 1px solid transparent;
}

.intro-box {
  background: var(--primary-50);
  border-left: 4px solid var(--primary);
}
.intro-box h3 {
  color: var(--primary-900);
}

.definition-box {
  background: var(--secondary-50);
  border-left: 4px solid var(--secondary);
}
.definition-box h3 {
  color: var(--secondary-900);
}

.analogy-box,
.important-note,
.highlight-result {
  background: var(--warning-50);
  border-left: 4px solid var(--warning);
  color: var(--text-primary);
}
.analogy-box h3,
.important-note h3 {
  color: var(--warning-700);
}

.tip-section {
  background: var(--neutral-50);
  border-left: 4px solid var(--neutral-500);
}
.tip-section h3 {
  color: var(--neutral-700);
}

.conclusion {
  background: var(--success-50);
  border-left: 4px solid var(--success);
  color: var(--success-900);
}

.decision-rule {
  background: var(--primary-50);
  border: 1px solid var(--primary-200);
  text-align: center;
}
.decision-rule p {
  color: var(--primary-900);
  font-weight: 600;
}

/* Steps */
.steps-container {
  display: grid;
  gap: var(--spacing-lg);
}

.step-card {
  display: flex;
  gap: var(--spacing-lg);
  align-items: flex-start;
  background: var(--surface-variant);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
}

.step-number {
  background: var(--primary);
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  flex-shrink: 0;
  box-shadow: var(--shadow-sm);
}

.step-content {
  flex: 1;
}
.step-content h3 {
  color: var(--primary);
  margin-bottom: var(--spacing-sm);
}

/* Cards & Grids */
.test-types-container,
.comparison-grid,
.calculator-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--spacing-xl);
  margin-top: var(--spacing-lg);
}

.test-type-card,
.comparison-item {
  background: var(--surface-variant);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  border-left: 4px solid var(--primary);
}
.test-type-card h3 {
  color: var(--primary);
  margin-bottom: var(--spacing-md);
}

/* Tables */
.comparison-table,
.critical-values-table,
.excel-table,
.errors-table {
  overflow-x: auto;
  margin: var(--spacing-lg) 0;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
  background: var(--surface);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th,
td {
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--border);
  text-align: left;
}

th {
  background: var(--primary-50);
  color: var(--primary-900);
  font-weight: 600;
}

tr:last-child td {
  border-bottom: none;
}
tr:nth-child(even) {
  background: var(--neutral-50);
}

/* Code & Math */
.code-block {
  background: var(--neutral-900);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  margin: var(--spacing-md) 0;
  overflow-x: auto;
}

.code-block pre {
  color: var(--neutral-100);
  font-family: 'Fira Code', monospace;
  margin: 0;
}

.latex-formula {
  text-align: center;
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-lg);
  background: var(--surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  overflow-x: auto;
}

/* Calculator */
.calculator-form,
.calculator-results {
  background: var(--surface);
  padding: var(--spacing-lg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
}

.form-group {
  margin-bottom: var(--spacing-lg);
}
.form-group label {
  display: block;
  margin-bottom: var(--spacing-xs);
  font-weight: 600;
  color: var(--text-primary);
}

.form-group input,
.form-group select {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-dark);
  border-radius: var(--radius-md);
  font-size: 1rem;
  transition: var(--transition);
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--primary-100);
}

.calculate-btn {
  width: 100%;
  padding: var(--spacing-md);
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  box-shadow: var(--shadow-sm);
}

.calculate-btn:hover {
  background: var(--primary-700);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.result-item {
  margin-bottom: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--neutral-50);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
}

.decision-result {
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  font-weight: bold;
  text-align: center;
}

.decision-result.rechazar {
  background: var(--error-50);
  color: var(--error-900);
  border: 2px solid var(--error-400);
}

.decision-result.no-rechazar {
  background: var(--success-50);
  color: var(--success-900);
  border: 2px solid var(--success-400);
}

/* Responsive */
@media (max-width: 768px) {
  .step-card {
    flex-direction: column;
    text-align: center;
  }
  .step-number {
    margin: 0 auto;
  }
  .container {
    padding: 0 1rem;
  }
}
</style>
